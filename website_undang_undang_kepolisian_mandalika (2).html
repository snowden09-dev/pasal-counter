<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>UNDANG - UNDANG KEPOLISIAN MANDALIKA</title>
  <meta name="title" content="UNDANG - UNDANG KEPOLISIAN MANDALIKA" />
  <meta property="og:title" content="UNDANG - UNDANG KEPOLISIAN MANDALIKA" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body { font-family: Arial, sans-serif; background:#f4f6f8; margin:0; padding:20px; }
    h1 { text-align:center; }
    table { width:100%; border-collapse:collapse; margin-top:15px; background:#fff; }
    th, td { border:1px solid #ccc; padding:8px; text-align:left; }
    th { background:#2c3e50; color:#fff; }
    tr:nth-child(even){ background:#f2f2f2; }
    .container { max-width:1200px; margin:auto; }
    .rekap { margin-top:30px; }
    button { padding:6px 10px; cursor:pointer; }
    .copy-btn { background:#3498db; color:#fff; border:none; border-radius:4px; }
    .copy-btn:hover { background:#2980b9; }
    .search-box {
  position: relative;
  max-width: 420px;
  margin: 20px auto;
}

.search-box input {
  width: 100%;
  padding: 12px 45px 12px 15px;
  font-size: 15px;
  border-radius: 25px;
  border: 1px solid #ccc;
  background: #fff;
  transition: all 0.3s ease;
}

.search-box input:focus {
  outline: none;
  border-color: #3498db;
  box-shadow: 0 0 8px rgba(52,152,219,0.35);
}

.search-box::after {
  content: "üîç";
  position: absolute;
  right: 15px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 18px;
  pointer-events: none;
  opacity: 0.6;
}

/* Toast notification */
.toast {
  position: fixed;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%) scale(0.95);
  background: #2c3e50;
  color: #fff;
  padding: 14px 22px;
  border-radius: 14px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.25);
  font-size: 15px;
  text-align: center;
  opacity: 0;
  transition: opacity .25s ease, transform .25s ease;
  z-index: 9999;
  pointer-events: none;
}

.toast.show {
  opacity: 1;
  transform: translate(-50%, -50%) scale(1);
}

/* Highlight pasal terpilih */
tr.selected {
  background: #dff5e1 !important;
  box-shadow: inset 4px 0 0 #27ae60;
}

/* ===== DARK MODE ===== */
body.dark {
  background: #121212;
  color: #eaeaea;
}

body.dark h1,
body.dark h2 {
  color: #ffffff;
}

body.dark table {
  background: #1e1e1e;
}

body.dark th {
  background: #111827;
  color: #ffffff;
}

body.dark td {
  border-color: #2c2c2c;
}

body.dark tr:nth-child(even) {
  background: #1a1a1a;
}

/* search */
body.dark .search-box input {
  background: #1e1e1e;
  color: #ffffff;
  border-color: #333;
}

body.dark .search-box input::placeholder {
  color: #aaa;
}

/* rekap */
body.dark .rekap table {
  background: #1e1e1e;
}

/* selected highlight */
body.dark tr.selected {
  background: #1f3d2b !important;
  box-shadow: inset 4px 0 0 #2ecc71;
}

/* toast */
body.dark .toast {
  background: #0f172a;
}

/* button */
body.dark .copy-btn {
  background: #2563eb;
}

body.dark .copy-btn:hover {
  background: #1d4ed8;
}

  </style>

</head>

<div id="toast" class="toast" aria-live="polite" aria-hidden="true" style="display:none"></div>

<body>
<div class="container">
  <h1>UNDANG - UNDANG KEPOLISIAN MANDALIKA</h1>
  <div style="text-align:center; margin:15px 0;">
  <button class="copy-btn" onclick="toggleDarkMode()" id="darkBtn">
    üåô Dark Mode
  </button>
</div>

  <div class="search-box">
  <input 
    type="text" 
    id="searchInput" 
    placeholder="Cari pasal atau deskripsi..."
    onkeyup="searchPasal()"
  />
</div>



  <h2>RINGAN</h2>
  <table>
    <thead>
      <tr><th>PILIH</th><th>PASAL</th><th>DESKRIPSI</th><th>DENDA</th><th>MASA TAHANAN</th></tr>
    </thead>
    <tbody>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>0.1</td><td>TIDAK MEMILIKI SIM KENDARAAN</td><td>$10</td><td>5 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>0.2</td><td>MELAWAN ARAH SAAT BERKENDARA</td><td>$10</td><td>5 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>0.3</td><td>UPAYA MENYOGOK PETUGAS</td><td>$15</td><td>10 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>0.4</td><td>MEMBAWA HEWAN YANG DI LINDUNGIN ( PENYU, HIU, LUMBA- LUMBA)</td><td>$15</td><td>10 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>0.5</td><td>MEMBUAT KERUSUHAN DI KERAMAIAN</td><td>$20</td><td>10 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>0.6</td><td>MEMBERIKAN INFORMASI PALSU</td><td>$20</td><td>10 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>0.7</td><td>SENGAJA / TIDAK SENGAJA BERADA DI TKP PENEMBAKAN</td><td>$30</td><td>15 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>0.8</td><td>TIDAK MELENGKAPI ATRIBUTE SAAT BERKENDARA</td><td>$8</td><td>5 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>0.9</td><td>MENGGUNAKAN ATRIBUT KEPOLISIAN</td><td>$13</td><td>20 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>1.0</td><td>MENGHINA FACTION ( KEPOLISIAN, EMS, PEMERINTAH, PEDAGANG)</td><td>$50</td><td>30 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>1.1</td><td>MELAKUKAN PERJUDIAN ILEGAL</td><td>$20</td><td>25 BULAN</td></tr>
    </tbody>
  </table>

  <h2>MENENGAH</h2>
  <table>
    <thead>
      <tr><th>PILIH</th><th>PASAL</th><th>DESKRIPSI</th><th>DENDA</th><th>MASA TAHANAN</th></tr>
    </thead>
    <tbody>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>1.2</td><td>TIDAK MEMILIKI ID CARD</td><td>$10</td><td>5 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>1.3</td><td>MELAKUKAN PENIPUAN TERHADAP WARGA</td><td>$15</td><td>10 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>1.4</td><td>MEMBAWA MARIJUANA, KANABIS, SABU KRISTAL</td><td>$30</td><td>25 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>1.5</td><td>MELAKUKAN PEMBUATAN MARIJUANA / KANABIS</td><td>$15</td><td>15 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>1.6</td><td>MELAKUKAN PENJUALAN PENYU, HIU, LUMBA-LUMBA</td><td>$25</td><td>20 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>1.7</td><td>MEMBAWA RED MONEY</td><td>$25</td><td>20 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>1.8</td><td>MELAKUKAN PEMALAKAN / PERAMPOKAN TERHADAP WARGA (BEGAL)</td><td>$35</td><td>15 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>1.9</td><td>MEMBAWA BARANG ILEGAL (KEVLAR, KULIT, KRAKEN)</td><td>$20</td><td>15 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>2.0</td><td>MELAKUKAN PENCUCIAN UANG</td><td>$30</td><td>15 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>2.1</td><td>MELAKUKAN PEMBUATAN EFEDRIN / SABU KRISTAL</td><td>$40</td><td>17 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>2.3</td><td>UPAYA MELAWAN PETUGAS / TIDAK KOPERATIF</td><td>$15</td><td>10 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>2.4</td><td>MELAKUKAN PENGEDARAN MARIJUANA, KEVLAR</td><td>$30</td><td>10 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>2.5</td><td>MENGGANGGU FACTION GODSIDE</td><td>$50</td><td>13 BULAN</td></tr>
    </tbody>
  </table>

  <h2>BERAT</h2>
  <table>
    <thead>
      <tr><th>PILIH</th><th>PASAL</th><th>DESKRIPSI</th><th>DENDA</th><th>MASA TAHANAN</th></tr>
    </thead>
    <tbody>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>2.6</td><td>PENGEDARAN SENJATA ILEGAL</td><td>$50</td><td>20 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>2.7</td><td>TIDAK MEMPUNYAI LISENSI SENJATA LARAS PENDEK / MENENGAH</td><td>$30</td><td>25 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>2.8</td><td>MEMPROSES SENJATA ILEGAL / CRAFTING</td><td>$30</td><td>30 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>2.9</td><td>PENEMBAKAN TERHADAP TUGAS GOODSIDE</td><td>$50</td><td>20 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>3.0</td><td>MELAKUKAN CARSTEALING</td><td>$30</td><td>15 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>3.1</td><td>MELAKUKAN PERAMPOKAN WARUNG</td><td>$30</td><td>15 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>3.2</td><td>PERAMPOKAN BANK BESAR / FLEECA</td><td>$50</td><td>25 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>3.3</td><td>MELAKUKAN PENYANDRAAN TERHADAP WARGA</td><td>$45</td><td>10 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>3.4</td><td>MELAKUKAN PENYANDRAAN TERHADAP FACTION GOODSIDE</td><td>$1</td><td>HUKUMAN MATI / PENGADILAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>3.5</td><td>PEPERANGAN ANTAR KELOMPOK</td><td>$25</td><td>15 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>3.6</td><td>MELAKUKAN PENEMBAKAN TERHADAP WARGA</td><td>$25</td><td>10 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>3.7</td><td>UPAYA MEMBANTU TINDAKAN CRIMINAL</td><td>$15</td><td>10 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>3.8</td><td>MELAKUKAN PENEMBAKAN MASSAL / TERRORISME</td><td>$1</td><td>HUKUMAN MATI / PENGADILAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>3.9</td><td>MEMBAWA 3 SENJATA ILEGAL LARAS PENDEK / MENENGAH / PANJANG</td><td>$50</td><td>25 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>4.0</td><td>UPAYA MENGHILANGKAN BARANG BUKTI</td><td>$30</td><td>10 BULAN</td></tr>
      <tr><td><input type="checkbox" onchange="updateRekap(this)"></td><td>4.1</td><td>MELAKUKAN PELECEHAN SEKSUALISME</td><td>$50</td><td>50 BULAN</td></tr>
    </tbody>
  </table>

  <div class="rekap">
    <h2>REKAPAN</h2>
    <table id="rekapTable">
      <tbody>
        <tr><th>PASAL YANG DIPILIH</th><td id="rekapPasal">-</td></tr>
        <tr><th>TOTAL DENDA</th><td id="totalDenda">$0</td></tr>
        <tr><th>TOTAL TAHANAN</th><td id="totalTahanan">0 BULAN</td></tr>
        <tr><td colspan="2" style="text-align:right"><button class="copy-btn" onclick="copyAll()">COPY SEMUA</button><button class="copy-btn" style="background:#e74c3c" onclick="resetAll()">RESET</button></td>
</tr>
      </tbody>
    </table>
  </div>
</div>

<script>
let selectedPasal = [];

function updateRekap(cb){
  const row = cb.closest('tr');
  const pasal = row.cells[1].innerText;
  const denda = parseInt(row.cells[3].innerText.replace('$','')) || 0;
  const tahanan = parseInt(row.cells[4].innerText) || 0;

  if(cb.checked){
    row.classList.add("selected"); // highlight
    selectedPasal.push({pasal,denda,tahanan});
  } else {
    row.classList.remove("selected"); // remove highlight
    selectedPasal = selectedPasal.filter(p=>p.pasal!==pasal);
  }

  selectedPasal.sort((a,b)=>parseFloat(a.pasal)-parseFloat(b.pasal));

  let totalD = 0;
  let totalT = 0;
  selectedPasal.forEach(p=>{ totalD+=p.denda; totalT+=p.tahanan; });

  document.getElementById('rekapPasal').innerText = selectedPasal.length
    ? selectedPasal.map(p=>p.pasal).join(' ')
    : '-';

  document.getElementById('totalDenda').innerText = '$'+totalD;
  document.getElementById('totalTahanan').innerText = totalT+' BULAN';
}

function searchPasal() {
  const input = document.getElementById("searchInput").value.toLowerCase();

  const pasalTables = document.querySelectorAll(".container > table");

  pasalTables.forEach(table => {
    const rows = table.querySelectorAll("tbody tr");

    rows.forEach(row => {
      const pasal = row.cells[1]?.innerText.toLowerCase() || "";
      const desc  = row.cells[2]?.innerText.toLowerCase() || "";

      if (pasal.includes(input) || desc.includes(input)) {
        row.style.display = "";
      } else {
        row.style.display = "none";
      }
    });
  });
}

function showToast(message, duration = 3000) {
  const toast = document.getElementById('toast');
  toast.innerText = message;
  toast.style.display = 'block';
  toast.setAttribute('aria-hidden', 'false');
  toast.classList.add('show');

  // clear previous timeout jika ada
  if (window._toastTimeout) clearTimeout(window._toastTimeout);

  window._toastTimeout = setTimeout(() => {
    toast.classList.remove('show');
    toast.setAttribute('aria-hidden', 'true');
    // sembunyikan setelah transisi
    setTimeout(() => { toast.style.display = 'none'; }, 250);
  }, duration);
}

function copyAll(){
  if (!selectedPasal.length) {
    showToast("Belum ada pasal yang dipilih");
    return;
  }

  const pasalList = selectedPasal.map(p => p.pasal).join(", ");

  let totalTahanan = 0;
  let totalDenda = 0;

  selectedPasal.forEach(p => {
    totalTahanan += p.tahanan;
    totalDenda += p.denda;
  });

  const text = `${pasalList} | ${totalTahanan} Bulan | $${totalDenda}`;

  if (navigator.clipboard && window.isSecureContext) {
    navigator.clipboard.writeText(text)
      .then(() => showToast("Pasal sudah dicopy, silahkan kirim di /ro"))
      .catch(() => fallbackCopy(text));
  } else {
    fallbackCopy(text);
  }
}

// Fallback buat mobile
function fallbackCopy(text) {
  const textarea = document.createElement("textarea");
  textarea.value = text;
  textarea.style.position = "fixed";
  textarea.style.top = "-1000px";
  textarea.style.left = "-1000px";
  textarea.setAttribute("readonly", "");

  document.body.appendChild(textarea);
  textarea.select();
  textarea.setSelectionRange(0, textarea.value.length);

  try {
    const success = document.execCommand("copy");
    if (success) {
      showToast("Pasal sudah dicopy, silahkan kirim di /ro");
    } else {
      showToast("Copy gagal, tekan & tahan untuk salin manual");
    }
  } catch (e) {
    showToast("Copy gagal, tekan & tahan untuk salin manual");
  }

  document.body.removeChild(textarea);
}

function resetAll(){
  // uncheck semua checkbox
  document.querySelectorAll('input[type="checkbox"]').forEach(cb => {
    cb.checked = false;
    cb.closest('tr')?.classList.remove("selected");
  });

  // reset data
  selectedPasal = [];

  // reset rekap
  document.getElementById('rekapPasal').innerText = '-';
  document.getElementById('totalDenda').innerText = '$0';
  document.getElementById('totalTahanan').innerText = '0 BULAN';

  // reset search
  const search = document.getElementById("searchInput");
  if (search) {
    search.value = "";
    searchPasal();
  }

  showToast("Semua pasal berhasil direset");
}

function toggleDarkMode() {
  document.body.classList.toggle("dark");

  const btn = document.getElementById("darkBtn");
  const isDark = document.body.classList.contains("dark");

  btn.innerText = isDark ? "‚òÄÔ∏è Light Mode" : "üåô Dark Mode";

  // simpan preferensi
  localStorage.setItem("darkMode", isDark ? "on" : "off");
}

// auto load preference
window.addEventListener("DOMContentLoaded", () => {
  if (localStorage.getItem("darkMode") === "on") {
    document.body.classList.add("dark");
    const btn = document.getElementById("darkBtn");
    if (btn) btn.innerText = "‚òÄÔ∏è Light Mode";
  }
});
</script>


</body>
</html>
